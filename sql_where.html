---
title: SQL expression syntax
layout: default
---

 <p></p>
<ul>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Syntax">Syntax</a></li>
<li><a href="#Items">Items</a></li>
<ul><li><a href="#Record_attributes">Record attributes</a></li></ul>
<li><a href="#Operators">Operators</a></li>
<ul>
<li><a href="#Conditional_Operators">Conditional Operators</a></li>
<li><a href="#Logical_Operators">Logical Operators</a></li>
<li><a href="#Field_Operators">Field Operators</a></li>
</ul>
<li><a href="#Functions">Functions</a></li>
<ul>
<li><a href="#Bundled_functions">Bundled functions</a></li>
<li><a href="#Custom_functions">Custom functions</a></li>
</ul>
</ul><h1>
<a name="Introduction"></a>Introduction<a href="#Introduction" class="section_anchor"></a>
</h1>
<p>The Where condition is shared among many SQL commands. </p>
<h1>
<a name="Syntax"></a>Syntax<a href="#Syntax" class="section_anchor"></a>
</h1>
<p><tt>[&lt;item&gt;] &lt;operator&gt; &lt;item&gt;</tt> </p>
<h1>
<a name="Items"></a>Items<a href="#Items" class="section_anchor"></a>
</h1>
<p>And <tt>item</tt> can be: </p>
<p></p>
<table class="wikitable">
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>What</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Available since</strong> </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> field </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Document field </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where <strong>price</strong> &gt; 1000000 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>field[&lt;indexes&gt;]</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Document field part. To know more about field part look at the full syntax: <a href="document_field_part.html">Document field part</a> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where <strong><tt>tags[1]</tt></strong> = 'Hi' or <strong><tt>tags[0-3]</tt></strong> IN ('Hello') and <strong><tt>employees[name='Linus']</tt></strong> IS NOT NULL </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc5 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> record attribute </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Record attribute name with @ as prefix </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where <strong>@class</strong> = 'Profile' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.21 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> column </td>
<td style="border: 1px solid #ccc; padding: 5px;"> The number of the column. Useful in Column Database </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where <strong>column(1)</strong> &gt; 300 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any() </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Represents any field of the Document. The condition is true if ANY of the fields matches the condition </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where <strong>any()</strong> like 'L%' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.10 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> all() </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Represents all the fields of the Document. The condition is true if ALL the fields match the condition </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where <strong>all()</strong> is null </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.10 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <a href="#Functions">function</a> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Any <a href="#Functions">function</a> between the defined </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where distance(x, y, 52.20472, 0.14056 ) &lt;= 30 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
</table><h2>
<a name="Record_attributes"></a>Record attributes<a href="#Record_attributes" class="section_anchor"></a>
</h2>
<p></p>
<table class="wikitable">
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Name</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Available since</strong> </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> @this </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the record it self </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select <strong>@this.toJSON()</strong> from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> @rid </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the <a href="concepts.html#RecordID">RecordID</a> in the form <tt>&lt;cluster:position&gt;</tt>. It's null for embedded records. <i>NOTE: using @rid in where condition slow down queries. Much better to use the <a href="concepts.html#RecordID">RecordID</a> as target. Example: change this: <tt>select from Profile where @rid = #10:44</tt> with this: <tt>select from #10:44</tt> </i> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>@rid</strong> = #11:0 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.21 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> @class </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns Class name only for record of type Schema Aware. It's null for the others </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>@class </strong> = 'Profile' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.21 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> @version </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the record version as integer. Version starts from 0. Can't be null </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>@version</strong> &gt; 0 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.21 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> @size </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the record size in bytes </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>@size</strong> &gt; 1024 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.21 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> @type </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the record type between: 'document', 'column', 'flat', 'bytes' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>@type</strong> = 'flat' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.21 </td>
</tr>
</table><h1>
<a name="Operators"></a>Operators<a href="#Operators" class="section_anchor"></a>
</h1>
<h2>
<a name="Conditional_Operators"></a>Conditional Operators<a href="#Conditional_Operators" class="section_anchor"></a>
</h2>
<p></p>
<table class="wikitable">
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Apply to</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Operator</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Available since</strong> </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> = </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Equals to </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name <strong>=</strong> 'Luke' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string</td>
<td style="border: 1px solid #ccc; padding: 5px;"> like </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Similar to equals, but allow the wildcard '%' that means 'any' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name <strong>like</strong> 'Luk%' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> &lt; </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Less than </td>
<td style="border: 1px solid #ccc; padding: 5px;"> age <strong>&lt;</strong> 40 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> &lt;= </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Less than or equal to </td>
<td style="border: 1px solid #ccc; padding: 5px;"> age <strong>&lt;=</strong> 40 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> &gt; </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Greater than </td>
<td style="border: 1px solid #ccc; padding: 5px;"> age <strong>&gt;</strong> 40 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> &gt;= </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Greater than or equal to </td>
<td style="border: 1px solid #ccc; padding: 5px;"> age <strong>&gt;=</strong> 40 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> &lt;&gt; </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Not equals (same of !=) </td>
<td style="border: 1px solid #ccc; padding: 5px;"> age <strong>&lt;&gt;</strong> 40 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> BETWEEN </td>
<td style="border: 1px solid #ccc; padding: 5px;"> The value is between a range. It's equivalent to <tt>&lt;field&gt; &gt;= &lt;from-value&gt; AND &lt;field&gt; &lt;= &lt;to-value&gt;</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> price BETWEEN 10 and 30 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc2 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> IS </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Used to test if a value is NULL </td>
<td style="border: 1px solid #ccc; padding: 5px;"> children <strong>is</strong> null </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.6 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> collection</td>
<td style="border: 1px solid #ccc; padding: 5px;"> IN </td>
<td style="border: 1px solid #ccc; padding: 5px;"> contains any of the elements listed </td>
<td style="border: 1px solid #ccc; padding: 5px;"> values <strong>in</strong> <tt>[3,4,5]</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.6 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> collection </td>
<td style="border: 1px solid #ccc; padding: 5px;"> CONTAINS </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if the collection contains at least one element that satisfy the next condition. Condition can be a single item: in this case the behaviour is like the IN operator </td>
<td style="border: 1px solid #ccc; padding: 5px;"> children <strong>contains</strong> (name = 'Luke') - map.values() <strong>contains</strong> (name = 'Luke') </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> collection </td>
<td style="border: 1px solid #ccc; padding: 5px;"> CONTAINSALL </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if all the elements of the collection satisfy the next condition </td>
<td style="border: 1px solid #ccc; padding: 5px;"> children <strong>containsAll</strong> (name = 'Luke') </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> map </td>
<td style="border: 1px solid #ccc; padding: 5px;"> CONTAINSKEY </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if the map contains at least one key equals to the requested. You can also use map.keys() CONTAINS in place of it</td>
<td style="border: 1px solid #ccc; padding: 5px;"> connections <strong>containsKey</strong> 'Luke' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.22 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> map </td>
<td style="border: 1px solid #ccc; padding: 5px;"> CONTAINSVALUE </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if the map contains at least one value equals to the requested. You can also use map.values() CONTAINS in place of it </td>
<td style="border: 1px solid #ccc; padding: 5px;"> connections <strong>containsValue</strong> 10:3 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.22 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> CONTAINSTEXT </td>
<td style="border: 1px solid #ccc; padding: 5px;"> used with <a href="console_command_create_index.html">Full text indexes</a>. Current limitation is that it must be the unique condition of a query </td>
<td style="border: 1px solid #ccc; padding: 5px;"> text <strong>containsText</strong> 'jay' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.22 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> MATCHES </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Matches the string using a <a href="http://www.regular-expressions.info/" rel="nofollow">Regular Expression</a> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> text <strong>matches</strong> '\b[A-Z0-9.<i>%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b' </i>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.22 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>TRAVERSE[(&lt;minDeep&gt; [,&lt;maxDeep&gt; [,&lt;fields&gt;]])]</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if traversing the declared field(s) at the level from <tt>&lt;minDeep&gt;</tt> to <tt>&lt;maxDeep&gt;</tt> matches the condition. A deep = 0 means the root node, maxDeep = -1 means no limit: traverse all the graph recursively. If <tt>&lt;minDeep&gt;</tt> and <tt>&lt;maxDeep&gt;</tt> are not used, then (0, -1) will be taken. If <tt>&lt;fields&gt;</tt> is not passed, than <tt>any()</tt> will be used.}}}</td>
<td style="border: 1px solid #ccc; padding: 5px;"> select from profile where any() <strong>traverse(0,7,'followers,followings')</strong> ( address.city.name = 'Rome' ) </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.10 and 0.9.24 for <tt>&lt;fields&gt;</tt> parameter </td>
</tr>
</table><h2>
<a name="Logical_Operators"></a>Logical Operators<a href="#Logical_Operators" class="section_anchor"></a>
</h2>
<p></p>
<table class="wikitable">
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Operator</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Available since</strong> </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> AND </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if both the conditions are true </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name = 'Luke' <strong>and</strong> surname like 'Sky%' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> OR </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if at least one of the condition is true </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name = 'Luke' <strong>or</strong> surname like 'Sky%' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> NOT </td>
<td style="border: 1px solid #ccc; padding: 5px;"> true if the condition is false </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>not</strong> name = 'Luke' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Not supported yet </td>
</tr>
</table><h2>
<a name="Field_Operators"></a>Field Operators<a href="#Field_Operators" class="section_anchor"></a>
</h2>
<p>These operators apply directly to the fields. They are beyond the SQL standard but you can use it in your queries. You can concatenate N operators in sequence. <i>Note: operators are case-insensitive.</i> </p>
<p></p>
<table class="wikitable">
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Apply to</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Operator</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Available since</strong> </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> document, map, list, array </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>[&lt;string&gt;]</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Get an item from a multi-value object like a map, a list, an array or a document. For document and maps the item must be a string, for lists and arrays the index as number</td>
<td style="border: 1px solid #ccc; padding: 5px;">select from Profile where contacts<tt>[phone]</tt>.left(3) = '+39' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc5 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.append('&lt;string&gt;')</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Appends a string to another one</td>
<td style="border: 1px solid #ccc; padding: 5px;">select name.<strong>append(' ')</strong>.<strong>append(surname)</strong> from Profile</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string, short, int, long </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.asBoolean()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Transforms the field into a Boolean type. If the origin type is a string, then "true" and "false" is checked. If it's a number then 1 means TRUE while 0 means FALSE</td>
<td style="border: 1px solid #ccc; padding: 5px;">online.<strong>toBoolean()</strong> = true</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.15 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string, long </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.asDate()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Transforms the field into a Date type</td>
<td style="border: 1px solid #ccc; padding: 5px;">time.<strong>toDate()</strong> -&gt; time is stored as long type measuring milliseconds since a particular day</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.14 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string, long </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.asDateTime()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Transforms the field into a Date type but parsing also the time information</td>
<td style="border: 1px solid #ccc; padding: 5px;">time.<strong>toDateTime()</strong> &lt; '01-01-2010 00:00:00' -&gt; time is stored as long type measuring milliseconds since a particular day. Returns all the records where time is before the year 2010</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.14 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.asFloat()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Transforms the field into a float type</td>
<td style="border: 1px solid #ccc; padding: 5px;">ray.<strong>toFloat()</strong> &gt; 3.14</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.14 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.asInteger()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Transforms the field into an integer type</td>
<td style="border: 1px solid #ccc; padding: 5px;">value.left(3).<strong>toInteger()</strong> -&gt; Converts the first 3 chars of 'value' field in an integer</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.14 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.asString()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Transforms the field into a string type</td>
<td style="border: 1px solid #ccc; padding: 5px;">salary.<strong>toString()</strong>.indexof('.') &gt; -1 -&gt; True if the salary has decimal</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.14 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.charAt(&lt;pos&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the character of the original string contained in the position 'pos'. 'pos' starts from 0 to string length -1 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>charAt( 0 )</strong> = 'L' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> any </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.format('&lt;frmt&gt;')</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the value formatted using the common "printf" syntax. For the complete reference goto <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Formatter.html#syntax" rel="nofollow">Java Formatter JavaDoc</a>. (Available since v0.9.5) </td>
<td style="border: 1px solid #ccc; padding: 5px;">salary.<strong>format("%04d")</strong> -&gt; formats a number with 4 digits filling with 0 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.8 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.indexOf('&lt;string&gt;' [, &lt;begin&gt; ]) </tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the position of the <tt>&lt;string&gt;</tt> inside the item. It returns -1 if no occurrences are found </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>indexOf( 'street' )</strong> &gt; -1 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.10 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> maps </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.keys()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Returns the map's keys as a separate set. Useful to use in conjunction with CONTAINS and CONTAINSALL operators </td>
<td style="border: 1px solid #ccc; padding: 5px;">map.<strong>keys()</strong> CONTAINS 'Luke'</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.left(&lt;len&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns a substring of the original cutting from the begin and getting 'len' characters. </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>left( 4 )</strong> = 'Luke' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.length()</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the length of the string. If the string is null 0 will be returned </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>length()</strong> &gt; 0 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.prefix('&lt;string&gt;')</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Prefixes a string to another one</td>
<td style="border: 1px solid #ccc; padding: 5px;">select name.<strong>prefix('Mr. ')</strong> from Profile</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc1 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.right(&lt;len&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns a substring of the original cutting from the end of the string 'len' characters. </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>right( 2 )</strong> = 'ke' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> collection </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.size()</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the size of the collection </td>
<td style="border: 1px solid #ccc; padding: 5px;"> children.<strong>size()</strong> &gt; 0 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.subString(&lt;begin&gt; [, &lt;len&gt;] )</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns a substring of the original cutting from 'begin' and getting 'len' characters. 'begin' starts from 0 to string length -1 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>substring( 0,1 )</strong> = 'L' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.trim()</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the original string removing white spaces from the begin and the end </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>trim()</strong> == 'luke' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> record </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.toJSON()</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the record in JSON format </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select @this.<strong>toJson()</strong> as json from Profile </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.8 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.toUpperCase()</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the string in upper case </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>toUpperCase()</strong> == 'LUKE' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> string </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.toLowerCase()</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> returns the string in lower case </td>
<td style="border: 1px solid #ccc; padding: 5px;"> name.<strong>toLowerCase()</strong> == 'luke' </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.7 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> maps </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>.values()</tt>
</td>
<td style="border: 1px solid #ccc; padding: 5px;"> Returns the map's values as a separate collection. Useful to use in conjunction with CONTAINS and CONTAINSALL operators </td>
<td style="border: 1px solid #ccc; padding: 5px;">map.<strong>values()</strong> CONTAINSALL ( name is not null)</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc1 </td>
</tr>
</table><h1>
<a name="Functions"></a>Functions<a href="#Functions" class="section_anchor"></a>
</h1>
<h2>
<a name="Bundled_functions"></a>Bundled functions<a href="#Bundled_functions" class="section_anchor"></a>
</h2>
<p></p>
<table class="wikitable">
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Name</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> <strong>Available since</strong> </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>count(&lt;field&gt;|*)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Counts the records that match the query condition. If <tt>*</tt> is not used as a field, then the record will be counted only if the field content is not null </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select count(<tt>*</tt>) from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>min(&lt;field&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Returns the minimum value </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select min(salary) from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>max(&lt;field&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Returns the maximum value </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select max(salary) from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>avg(&lt;field&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Returns the average value </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select avg(salary) from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>sum(&lt;field&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Returns the sum of all the values returned </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select average(salary) from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>sysdate([&lt;format&gt;])</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Returns the current date time. If no format is specified, then a Date object is returned, otherwise the date is formatted as string following these <a href="http://download.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html" rel="nofollow">rules</a> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select sysdate('dd-MM-yyyy') from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>format(&lt;format&gt;, &lt;arg1&gt; [,&lt;argN&gt;]*)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Formats the values using the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html" rel="nofollow">printf()</a> and <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" rel="nofollow">String.format()</a> conventions. Look <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax" rel="nofollow">here for more information</a>.</td>
<td style="border: 1px solid #ccc; padding: 5px;"> select format("%d - Mr. %s %s (%s)", id, name, surname, address) from Account </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>distance()</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Computes the distance between two points in the globe using the Haversine algorithm. Coordinates must be as degrees </td>
<td style="border: 1px solid #ccc; padding: 5px;"> where distance(x, y,52.20472, 0.14056 ) &lt;= 30 </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 0.9.25 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>distinct(&lt;field&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;">Retrieves only unique data entries depending on the field you have specified as argument. The main differences with standard SQL DISTINCT are that in OrientDB is a function with parenthesis and only one field can be specified </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select distinct(name) from City </td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc2 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>union(&lt;field*&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Works as aggregate or inline. If only one argument is passed than aggregates, otherwise executes, and returns, a UNION of the collections received as parameters. Works also with no collection values </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select union(friends) from profile | select union(inEdges, outEdges) from OGraphVertex where label = 'test'</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc2 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>intersect(&lt;field*&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Works as aggregate or inline. If only one argument is passed than aggregates, otherwise executes, and returns, the INTERSECTION of the collections received as parameters </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select intersect(friends) from profile where jobTitle = 'programmer' | select intersect(inEdges, outEdges) from OGraphVertex</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc2 </td>
</tr>
<tr>
<td style="border: 1px solid #ccc; padding: 5px;"> <tt>difference(&lt;field*&gt;)</tt> </td>
<td style="border: 1px solid #ccc; padding: 5px;"> Works as aggregate or inline. If only one argument is passed than aggregates, otherwise executes, and returns, the DIFFERENCE between the collections received as parameters </td>
<td style="border: 1px solid #ccc; padding: 5px;"> select difference(tags) from book | select difference(inEdges, outEdges) from OGraphVertex</td>
<td style="border: 1px solid #ccc; padding: 5px;"> 1.0rc2 </td>
</tr>
</table><h2>
<a name="Custom_functions"></a>Custom functions<a href="#Custom_functions" class="section_anchor"></a>
</h2>
<p>The SQL engine can be extended with custom functions. Before to use them in your queries you need to register: </p>
<pre class="prettyprint">// REGISTER 'BIGGER' FUNCTION WITH FIXED 2 PARAMETERS (MIN/MAX=2)
OSQLEngine.getInstance().registerFunction("bigger", new OSQLFunctionAbstract("bigger", 2, 2) {
  public String getSyntax() {
    return "bigger(&lt;first&gt;, &lt;second&gt;)";
  }

  public Object execute(Object[] iParameters) {
    if (iParameters[0] == null || iParameters[1] == null)
      // CHECK BOTH EXPECTED PARAMETERS
      return null;

    if (!(iParameters[0] instanceof Number) || !(iParameters[1] instanceof Number))
      // EXCLUDE IT FROM THE RESULT SET
      return null;

    // USE DOUBLE TO AVOID LOSS OF PRECISION
    final double v1 = ((Number) iParameters[0]).doubleValue();
    final double v2 = ((Number) iParameters[1]).doubleValue();

    return Math.max(v1, v2);
  }

  public boolean aggregateResults() {
    return false;
  }
});</pre>
<p>Now you can execute it: </p>
<pre class="prettyprint">List&lt;ODocument&gt; result = database.command(new OSQLSynchQuery&lt;ODocument&gt;("select from Account where bigger( salary, 10 ) &gt; 10")).execute();</pre>
