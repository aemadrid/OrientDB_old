---
title: Document Database performance tuning
layout: default
---

 <p></p>
<ul>
<li><a href="#Massive_Insertion">Massive Insertion</a></li>
<ul><li><a href="#Avoid_document_creation">Avoid document creation</a></li></ul>
</ul><p>This guide is specific for the Document Database. Please be sure to read the generic guide to the <a href="performance_tuning.html">Performance Tuning</a>. </p>
<h2>
<a name="Massive_Insertion"></a>Massive Insertion<a href="#Massive_Insertion" class="section_anchor"></a>
</h2>
<p>See <a href="performance_tuning.html#Massive_Insertion">Generic improvement on massive insertion</a>. </p>
<h3>
<a name="Avoid_document_creation"></a>Avoid document creation<a href="#Avoid_document_creation" class="section_anchor"></a>
</h3>
<p>You can avoid the creation of a new ODocument for each insertion by using the ODocument.reset() method that clears the instance making it ready for a new insert operation. Bear in mind that you will need to assign the document with the proper class after resetting as it is done in the code below. </p>
<p><i>NOTE: This trick works ONLY IN NON-TRANSACTIONAL contexts, because during transactions the documents could be kept in memory until commit.</i> </p>
<p>Example: </p>
<pre class="prettyprint">db.declareIntent( new OIntentMassiveInsert() );

ODocument doc = new ODocument(db);
for( int i = 0; i &lt; 1000000; ++i ){
  doc.reset();
  doc.setClassname("Customer");
  doc.field("id", i);
  doc.field("name", "Jason");
  doc.save();
}

db.declareIntent( null );</pre>
