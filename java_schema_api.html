---
title: Schema APIs
layout: default
---

 <p></p>
<ul>
<li><a href="#Java_Schema_APIs">Java Schema APIs</a></li>
<ul>
<li><a href="#Create_a_new_class">Create a new class</a></li>
<ul><li><a href="#Using_a_physical_cluster">Using a physical cluster</a></li></ul>
<li><a href="#Create_a_property">Create a property</a></li>
<li><a href="#Full_example">Full example</a></li>
<li><a href="#Define_relationships">Define relationships</a></li>
</ul>
</ul><h1>
<a name="Java_Schema_APIs"></a>Java Schema APIs<a href="#Java_Schema_APIs" class="section_anchor"></a>
</h1>
<p>You must be using a database (see  <a href="java_api.html#Database_types">Database types</a>) that supports schemas to use the Schema API. </p>
<p>To begin, you'll need the Schema instance of the database you're using: </p>
<pre class="prettyprint">OSchema schema = database.getMetadata().getSchema();</pre>
<p>Remember to save the schema instance once you've finished making changes: </p>
<pre class="prettyprint">db.getMetadata().getSchema().save();</pre>
<h2>
<a name="Create_a_new_class"></a>Create a new class<a href="#Create_a_new_class" class="section_anchor"></a>
</h2>
<p>The method <tt>createClass(name)</tt> creates a new class using a <a href="concepts.html#Logical_Cluster">logical cluster</a>. Example: </p>
<pre class="prettyprint">OClass person = database.getMetadata().getSchema().createClass("AnimalType");</pre>
<h3>
<a name="Using_a_physical_cluster"></a>Using a physical cluster<a href="#Using_a_physical_cluster" class="section_anchor"></a>
</h3>
<p>To create a new class using a <a href="concepts.html#Physical_Cluster">physical cluster</a> use the method <tt>createClass(name, cluster)</tt> instead. Example: </p>
<pre class="prettyprint">OClass person = database.getMetadata().getSchema().createClass("Person", database.getStorage().addCluster("person"));</pre>
<h2>
<a name="Create_a_property"></a>Create a property<a href="#Create_a_property" class="section_anchor"></a>
</h2>
<p>Each class can have zero or more properties. To create a property use the <tt>OClass.createProperty(name, type)</tt>. Example: </p>
<pre class="prettyprint">person.createProperty("name", OType.STRING).setMandatory(true);</pre>
<h2>
<a name="Full_example"></a>Full example<a href="#Full_example" class="section_anchor"></a>
</h2>
<pre class="prettyprint">OClass animal = db.getMetadata().getSchema().createClass("Animal", database.getStorage().addCluster("animal"));
animal.createProperty("id", OType.INTEGER).setMandatory(true);
animal.createProperty("name", OType.STRING).setMin("3").setMax("30");
animal.createProperty("type", OType.STRING);
animal.createProperty("race", OType.STRING);
animal.createProperty("location", OType.STRING);
animal.createProperty("price", OType.FLOAT).setMin("0");

db.getMetadata().getSchema().save();</pre>
<h2>
<a name="Define_relationships"></a>Define relationships<a href="#Define_relationships" class="section_anchor"></a>
</h2>
<p>Example of a relationship 1-N between the class Order and OrderItem: </p>
<pre class="prettyprint">OClass orderItem = db.getMetadata().getSchema().createClass("OrderItem");
orderItem.createProperty("id", OType.INTEGER);
orderItem.createProperty("animal", OType.LINK, animal);
orderItem.createProperty("quantity", OType.INTEGER).setMin("1");
orderItem.createProperty("price", OType.FLOAT).setMin("0");

OClass order = db.getMetadata().getSchema().createClass("Order");
order.createProperty("id", OType.INTEGER).setMandatory(true);
order.createProperty("date", OType.DATE).setMin("2009-01-01 00:00:00");
order.createProperty("customer", OType.STRING);
order.createProperty("items", OType.EMBEDDEDLIST, orderItem);
order.createProperty("totalPrice", OType.FLOAT);

db.getMetadata().getSchema().save();</pre>
